{% extends "layout/base.html.twig" %}
{% block content %}
<main class="max-w-xl mx-auto p-8">
    <header class="mb-8">
        <h1 class="text-2xl font-bold text-gray-800">
            Agendar horário
        </h1>
        <p class="text-gray-600 mt-1">
            Selecione uma data para ver os horários disponíveis
        </p>
    </header>

    {% if error is defined %}
        <div class="mb-4 text-sm text-red-600">
            {{ error }}
        </div>
    {% endif %}

    <form
        method="get"
        action="/slots/booking"
        class="bg-white rounded-xl border border-gray-100 shadow-sm p-6"
    >
        <input type="hidden" name="user_id" value="{{ userId ?? user_id }}">

        <label for="date" class="block text-sm font-medium text-gray-700 mb-2">
            Data
        </label>

        <input
            type="date"
            name="date"
            id="date"
            value="{{ selectedDate ?? '' }}"
            required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg
                   focus:border-sky-500 focus:ring-2 focus:ring-sky-500/20
                   focus:outline-none transition"
        >

        <button
            type="submit"
            class="mt-4 w-full bg-sky-500 hover:bg-sky-600
                   text-white py-3 rounded-lg font-medium transition"
        >
            Ver horários
        </button>
    </form>

    {% if slots is defined %}
        <section class="mt-6">
            <h2 class="text-lg font-semibold text-gray-800 mb-3">
                Horários disponíveis
            </h2>

            {% if slots is empty %}
                <p class="text-sm text-gray-500">
                    Nenhum horário disponível para esta data.
                </p>
            {% else %}
                <div class="grid grid-cols-3 gap-3">
                    {% for slot in slots %}
                        <button
                            type="button"
                            class="px-4 py-3 rounded-lg border
                                   text-sm font-medium
                                   bg-white text-gray-700 border-gray-300"
                        >
                            {{ slot.start }}
                        </button>
                    {% endfor %}
                </div>
            {% endif %}
        </section>
    {% endif %}
</main>


{% endblock %}